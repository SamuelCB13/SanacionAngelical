---
import CalendarPlusIcon from "./icons/CalendarPlus.astro";
---

<header
    class="fixed z-50 w-full py-3 flex items-center justify-between px-4 sm:px-6 lg:justify-evenly transition-all duration-300 bg-white border-b border-gray-200"
    id="header"
>
    <!-- Logo -->
    <section>
        <a
            href="/"
            class="flex items-center justify-center gap-3 text-primary hover:text-pink-dark transition-all duration-200 ease-in-out"
        >
            <img src="/icono.png" alt="Icono Sanación Angelical" class="w-12 h-10" />
            <span class="text-sm sm:text-base">Sanación Angelical</span>
        </a>
    </section>

    <!-- Menú hamburguesa en móviles -->
    <button id="menu-btn" class="md:hidden text-primary focus:outline-none text-2xl">
        ☰
    </button>

    <!-- Navegación -->
    <nav
        id="nav-menu"
        class="hidden md:flex gap-4 text-primary absolute sm:static top-[68px] left-0 w-full sm:w-auto bg-white sm:bg-transparent py-4 sm:py-0 border-b sm:border-b-0 border-gray-200 sm:border-transparent shadow-md sm:shadow-none transition-all duration-300 flex-col md:flex-row justify-center text-center z-40"
    >
        <a
            href="/#inicio"
            class="hover:text-pink-dark transition-all duration-200 ease-in-out px-[1px] py-2 md:py-0"
        >
            Inicio
        </a>
        <a
            href="/#servicios"
            class="hover:text-pink-dark transition-all duration-200 ease-in-out px-[1px] py-2 md:py-0"
        >
            Servicios
        </a>
        <a
            href="/#productos"
            class="hover:text-pink-dark transition-all duration-200 ease-in-out px-[1px] py-2 md:py-0"
        >
            Productos
        </a>
        <a
            href="/#sobremi"
            class="hover:text-pink-dark transition-all duration-200 ease-in-out px-[1px] py-2 md:py-0"
        >
            Sobre mí
        </a>
        <a
            href="/#testimonios"
            class="hover:text-pink-dark transition-all duration-200 ease-in-out px-[1px] py-2 md:py-0"
        >
            Testimonios
        </a>
        <a
            href="/#contacto"
            class="hover:text-pink-dark transition-all duration-200 ease-in-out px-[1px] py-2 md:py-0"
        >
            Contacto
        </a>
    </nav>

    <!-- Botón de agenda -->
    <div class="flex">
        <a
            href="https://wa.link/5j7p4v"
            class="flex items-center justify-center gap-2 px-3 py-2 border border-pink-light rounded-full hover:bg-pink-light transition duration-200 text-sm"
            target="_blank"
        >
            <CalendarPlusIcon class="size-5 text-primary" />
            <span class="text-primary hidden sm:inline">Agendar Cita</span>
        </a>
    </div>
</header>

<style>
    header {
        backdrop-filter: blur(0px);
    }

    header.scrolled {
        backdrop-filter: blur(10px);
        background-color: rgba(255, 255, 255, 0.7); /* Fondo con transparencia */
    }

    .active {
        color: #808080;
    }
</style>

<script>
    // Efecto de scroll en header
    window.addEventListener("scroll", () => {
        const header = document.getElementById("header");
        if (window.scrollY > 50) {
            header?.classList.add("scrolled");
        } else {
            header?.classList.remove("scrolled");
        }
    });

    // Toggle menú en móviles
    document.getElementById("menu-btn")?.addEventListener("click", () => {
        document.getElementById("nav-menu")?.classList.toggle("hidden");
    });

    document.addEventListener("DOMContentLoaded", function () {
        const links = document.querySelectorAll("a");

        links.forEach((link) => {
            link.addEventListener("click", function () {
                // Remueve la clase 'active' de todos los enlaces
                links.forEach((l) => l.classList.remove("active"));

                // Agrega la clase 'active' al enlace seleccionado
                this.classList.add("active");
            });
        });
    });
</script>
